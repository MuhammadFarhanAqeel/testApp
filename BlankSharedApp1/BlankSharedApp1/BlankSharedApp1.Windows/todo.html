<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link href="css/jquery.mobile-1.4.5.min.css" rel="stylesheet">
    <script src="js/jquery-1.11.2.min.js"></script>
    <script src="js/jquery.mobile-1.4.5.min.js"></script>
    <script src="js/angular.min.js"></script>
    <link href="css/todo.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.firebase.com/js/client/2.0.4/firebase.js"></script>
</head>
<body>
      <!--login Page-->
      <div data-role="page" id="frontpage" style="background-image: url('images/backgroundimage.png');">
          <div data-role="header" data-positon="fixed" data-theme="b" class="ui-content" style="text-align: center;">
             TODO APP
          </div>

          <div data-role="main" id="login" data-theme="">

              <input type="text" id="Login_username" data-clear-btn="true" name="username" placeholder="Username"  value="">
              <input type="password" id="Login_pass" data-clear-btn="true" name="password" placeholder="Password"  value="" autocomplete="off">
              <a href="#add" class="Home  ui-btn ui-btn-inline ui-btn-b ui-shadow" onclick="" data-transition="slide"
                 >Add Task</a>
              <a href="#signup" class="Home  ui-btn ui-btn-inline ui-btn-b ui-shadow" data-transition="slide"
                 >Add User</a>

          </div>

          <div data-role="footer" data-theme="b" data-position="fixed" style="text-align: center; margin-bottom:0px; ">
              <div data-role="controlgroup" data-type="horizontal">
                  <a href="#add" class=" ui-btn  ui-btn-b ui-corner-all ui-shadow ui-icon-location  ui-btn-icon-left " data-transition="slide" data-direction="reverse" style="width: 130px; margin-right: 10px; ">Login With Facebook</a>
                  <a href="#credits" class="ui-btn  ui-btn-b ui-corner-all ui-shadow ui-icon-info ui-btn-icon-left "
                     data-transition="slide" data-direction="reverse" style="width: 130px; margin-right: 10px;">Info</a>
              </div>
          </div>
      </div>

      <!--SignUp Page-->
      <div data-role="page" id="signup" style="background-image: url('images/backgroundimage.png');">
          <div data-role="header" data-positon="fixed" data-theme="b" class="ui-content" style="text-align: center;">
             ADD USER
              <a href="#frontpage" class="ui-btn ui-btn-right ui-icon-back ui-btn-icon-notext" data-transition="slide"
                 data-direction="reverse"></a>
          </div>

          <div data-role="main" id="signup_content" data-theme="">
              <input type="text" id="Name" data-clear-btn="true" name="name" placeholder="Name" value="">
              <input type="email" id="Email" data-clear-btn="true" name="email" placeholder="Email"  value="">
              <input type="text" id="Username" data-clear-btn="true" name="username" placeholder="Username" value="">
              <input type="password" id="Password" data-clear-btn="true" name="password" placeholder="Password"  value="" autocomplete="off">
              <a href="#" class="Home  ui-btn ui-btn-inline ui-btn-b ui-shadow" onclick="signUp()" data-transition="slide" style="width: 260px;"
                      >ADD USER</a>

<!--              <a href="#" class="Home  ui-btn ui-btn-inline ui-btn-b ui-shadow" onclick="Delete_User()" data-transition="slide" style="width: 260px;"
                 >DELETE USER</a>-->

          </div>

          <div data-role="footer" data-theme="b" data-position="fixed" style="text-align: center; margin-bottom:0px; ">
              <div data-role="controlgroup" data-type="horizontal">
                  <a href="#" class=" ui-btn  ui-btn-b ui-corner-all ui-shadow ui-icon-location  ui-btn-icon-left " data-transition="slide" data-direction="reverse" style="width: 130px; margin-right: 10px; ">Login With Facebook</a>
                  <a href="#credits" class="ui-btn  ui-btn-b ui-corner-all ui-shadow ui-icon-info ui-btn-icon-left "
                     data-transition="slide" data-direction="reverse" style="width: 130px; margin-right: 10px;">Info</a>
              </div>
          </div>
      </div>

      <!--Add Task-->
      <div data-role="page" id="add" style="background-image: url('images/backgroundimage.png');">
          <div data-role="header" data-positon="fixed" data-theme="b" class="ui-content" style="text-align: center;">
              ADD TASK
          </div>

          <div data-role="main" id="add_content" data-theme="">
              <input type="text" id="TaskName" data-clear-btn="true" name="username" placeholder="Assign Task to:" value="" style="">
              <input type="text" id="TaskDetail" data-clear-btn="true" name="username" placeholder="Create Task" value="">
              <a href="#" class="Home  ui-btn ui-btn-inline ui-btn-b ui-shadow" onclick="AddTask()" data-transition="slide" style="width: 115px;"
                      >ADD TASK</a>

              <a href="#" class="Home  ui-btn ui-btn-inline ui-btn-b ui-shadow" onclick="Update_task()" data-transition="slide" style="width: 115px;"
                 >UPDATE TASK</a>

              <a href="#edit" class="Home  ui-btn ui-btn-inline ui-btn-b ui-shadow" data-transition="slide" onclick="viewTask()" style="width: 115px;"
                      >ViEW TASK</a>

          </div>

       </div>

      <!--Edit Content-->
      <div data-role="page" id="edit" style="background-image: url('images/backgroundimage.png');">
          <div data-role="header" data-positon="fixed" data-theme="b" class="ui-content"  style="text-align: center;">
              VIEW TASK
              <a href="#add" class="ui-btn ui-btn-right ui-icon-back ui-btn-icon-notext" data-transition="slide"
                 data-direction="reverse"></a>
          </div>

          <div data-role="main" id="edit_content" data-theme="">
              <table data-role="table" id="Data_name" data-mode="columntoggle" class="ui-body-d ui-shadow table-stripe ui-responsive" data-column-btn-theme="b" data-column-btn-text="Columns to display..." data-column-popup-theme="a">
                  <thead>
                      <tr class="ui-bar-d">
                          <th data-priority="2">NAME</th>
                          <th>TASK</th>
                          <th data-priority="3">DELETE</th>
                      </tr>
                  </thead>
                  <tbody>
                  </tbody>
              </table>
          </div>
      </div>

      <!--CREDITS-->
      <div data-role="page" id="credits" style="background-image: url('images/backgroundimage.png');">

          <div data-role="header" data-positon="fixed" data-theme="b" style="text-align: center;">
              <p>CREDITS</p>
              <a href="#signup" class="ui-btn ui-btn-right ui-icon-back ui-btn-icon-notext" data-transition="slide"
                 data-direction="reverse"></a>
          </div>

          <div data-role="main" class="ui-content" style="background-image: url('images/backgroundimage.png');" >
              <ul data-role="listview" data-inset="true" data-theme="b" style="margin-top: 50px;">
                  <li><a href="#farhan" class="ui-li-icon">Farhan</a></li>
                  <li><a href="#hammad" class="ui-li-icon">Hammad Shabbir</a></li>
                  <li><a href="#fahad" class="ui-li-icon">M Fahad Patel</a></li>
              </ul>
          </div>

          <div data-role="panel" id="farhan" data-display="reveal" data-position="right"
               style="background-image: url('images/backgroundimage.png');">
              <h2 class="panelheading">Farhan Aqeel</h2>
              <p class="paneltext"> Software Developer</p>
          </div>

          <div data-role="panel" id="hammad" data-display="reveal" data-position="right"
               style="background-image: url('images/backgroundimage.png');">
              <h2 class="panelheading">Mohammad Hammad Shabbir</h2>
              <p class="paneltext"> Software Developer</p>
          </div>

          <div data-role="panel" id="fahad" data-display="reveal" data-position="right"
               style="background-image: url('images/backgroundimage.png');">
              <h2 class="panelheading">M Fahad Patel</h2>
              <p class="paneltext"> Software Developer</p>
          </div>



      </div>


    <!--javascript code-->
    <script>
        var myFirebaseRef;

        function signUp() {
            myFirebaseRef = new Firebase("https://todoap.firebaseio.com/users");
            var name = document.getElementById("Name").value;
            var email = document.getElementById("Email").value;
            var username = document.getElementById("Username").value;
            var password = document.getElementById("Password").value;
            // alert(name + email + phone + mess);
            
            myFirebaseRef.child(name).set({    
            Email: email,
            Username: username,
            password: password
            
            });
        }

        function AddTask() {
            myFirebaseRef = new Firebase("https://todoap.firebaseio.com/Task");
            var T_name = document.getElementById("TaskName").value;
            var T_task = document.getElementById("TaskDetail").value;
            
            myFirebaseRef.child(T_name).update({
                    "Name": T_name,
                    "Task": T_task
            });
        }

       function viewTask() {

           var table = document.getElementById("Data_name");
           for(var i = table.rows.length - 1; i > 1; i--)
           {
               table.deleteRow(i);
           }
           var myFirebaseRef1 = new Firebase("https://todoap.firebaseio.com/Task");

                myFirebaseRef1.on("child_added", function (snapshot) {
                var newPost = snapshot.val();
                console.log("Name: " + newPost.Name);
                console.log("Task: " + newPost.Task);

                /*Get Table*/
                var table = document.getElementById("Data_name");
                /*Create Row*/
                var row = table.insertRow(1);
                /*Create Cell*/
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);
/*
                var cell4 = row.insertCell(3);
*/

                cell1.innerHTML = newPost.Name;
                cell2.innerHTML = newPost.Task;

                //Create Button
/*
                var editbutt = document.createElement('input'); // create a button
                editbutt.setAttribute('type','button');
                editbutt.setAttribute('name','edit');
                editbutt.setAttribute('value',' EDIT ');
                editbutt.setAttribute('data-rel','popup');
                editbutt.setAttribute('class','ui-btn ui-corner-all ui-shadow ui-btn-inline');
                editbutt.setAttribute('data-transition','pop');
                editbutt.setAttribute('onclick','#popupBasic');
                cell3.appendChild(editbutt);
                editbutt.onclick = function () {
                    var popup = open("", "Popup", "width=300,height=200");

                };
*/

                var deletebutt = document.createElement('input'); // create a button
                deletebutt.setAttribute('type','button');
                deletebutt.setAttribute('name','delete');
                deletebutt.setAttribute('value','DELETE');
                deletebutt.setAttribute('data-rel','popup');
                deletebutt.setAttribute('class','ui-btn ui-corner-all ui-shadow ui-btn-inline');
                deletebutt.setAttribute('data-transition','pop');
                cell3.appendChild(deletebutt);
                deletebutt.onclick = function () {
                    var T_name = cell1.innerHTML;
                    myFirebaseRef = new Firebase("https://todoap.firebaseio.com/Task/" + T_name);
                    myFirebaseRef.remove();
                    viewTask();

                };
            });

        }

        function Delete_User() {
            var name = document.getElementById("Name").value;

            myFirebaseRef = new Firebase("https://todoap.firebaseio.com/users/" + name);
            myFirebaseRef.remove();
        }

        function Update_task() {

                var T_name = document.getElementById("TaskName").value;
                var T_task = document.getElementById("TaskDetail").value;
                var obj;

                myFirebaseRef = new Firebase("https://todoap.firebaseio.com/Task");
                myFirebaseRef.on("child_added", function (snapshot) {
                    obj = snapshot.val();
                    console.log(obj.Name);
                
                    myFirebaseRef.child(T_name).update({
                        Task: T_task
                    });
                });
            }

    </script>
    

</body>

</html>